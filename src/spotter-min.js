Spotter.spotterFactory=function(){Spotter.instanceCount=Spotter.instanceCount==null?1:Spotter.instanceCount++;var variable_name="__SPOTTER_OBJECT_"+Spotter.instanceCount+Math.floor(Math.random()*100);var script=variable_name+' = new Spotter("'+variable_name+'");';return eval(script)};function Spotter(a){this.var_name=a;this.refresh_url="";this.lastCallReturned=true;this.lastScriptTag=null;this.observers=new Array()}Spotter.prototype.searchInterval=function(c,b){this.search(c);var a=this;this.intervalTImer=setInterval(function(){a.search(c)},b*1000)};Spotter.prototype.search=function(d){if(this.lastCallReturned){var b="http://search.twitter.com/search.json";b+=this.refresh_url!=""?this.refresh_url:"?q="+escape(d);b+="&callback="+this.var_name+".searchCallBack";b+="&random="+Math.floor(Math.random()*10000);var c=document.getElementsByTagName("head");var a=document.createElement("script");a.id="twitter_search_script"+this.var_name;a.type="text/javascript";a.src=b;if(this.lastScriptTag!=null){c[0].removeChild(this.lastScriptTag)}c[0].appendChild(a);this.lastScriptTag=a}};Spotter.prototype.searchCallBack=function(a){var b=a.results;this.refresh_url=a.refresh_url;if(b.length!=0){this.notifyObservers(b)}this.lastCallReturned=true};Spotter.prototype.registerObserver=function(a){if(a.notify!=undefined){this.observers.push(a)}};Spotter.prototype.notifyObservers=function(b){for(var a in this.observers){this.observers[a].notify(b)}};